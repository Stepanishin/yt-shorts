# üìö –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏–º–ø–æ—Ä—Ç—É —à—É—Ç–æ–∫ –∏–∑ RicUIB –¥–∞—Ç–∞—Å–µ—Ç–∞

## üìã –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å 500 —Å–ª—É—á–∞–π–Ω—ã—Ö —à—É—Ç–æ–∫ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:

```bash
npx tsx scripts/import-ricuib-jokes.ts
```

**–ì–æ—Ç–æ–≤–æ!** –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –í—ã–±–µ—Ä–µ—Ç 500 —Å–ª—É—á–∞–π–Ω—ã—Ö —à—É—Ç–æ–∫ —Å `added: false`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç –¥–ª–∏–Ω—É —Ç–µ–∫—Å—Ç–∞ (30-700 —Å–∏–º–≤–æ–ª–æ–≤)
- ‚úÖ –î–æ–±–∞–≤–∏—Ç –≤ MongoDB –∫–æ–ª–ª–µ–∫—Ü–∏—é `joke_candidates`
- ‚úÖ –ü–æ–º–µ—Ç–∏—Ç –∏—Ö –≤ JSON —Ñ–∞–π–ª–µ –∫–∞–∫ `added: true`

---

## üìÅ –§–∞–π–ª—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª —Å –¥–∞–Ω–Ω—ã–º–∏:
```
chistes_ricuib.json
```

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞–∂–¥–æ–π —à—É—Ç–∫–∏:
```json
{
  "index": 0,
  "titulo": "–ó–∞–≥–æ–ª–æ–≤–æ–∫ —à—É—Ç–∫–∏",
  "texto": "–¢–µ–∫—Å—Ç —à—É—Ç–∫–∏...",
  "categorias": ["cortos", "malos"],
  "palabras_clave": ["–∫–ª—é—á–µ–≤—ã–µ", "—Å–ª–æ–≤–∞"],
  "origen": "1000 chistes" | "Pintamania",
  "votos": 25 | null,
  "added": false
}
```

### –°–∫—Ä–∏–ø—Ç—ã:

1. **`scripts/import-ricuib-jokes.ts`** - –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –∏–º–ø–æ—Ä—Ç–∞
2. **`scripts/sync-ricuib-added-status.ts`** - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –ë–î
3. **`scripts/delete-old-ricuib-jokes.ts`** - –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —à—É—Ç–æ–∫
4. **`scripts/check-db-jokes.ts`** - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ë–î

---

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ç–±–æ—Ä–∞ —à—É—Ç–æ–∫

–ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ —à—É—Ç–∫–∏ –¥–æ–ª–∂–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å:

‚úÖ `added: false` - –µ—â–µ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –ë–î
‚úÖ –î–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞ `>= 30 —Å–∏–º–≤–æ–ª–æ–≤`
‚úÖ –î–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞ `<= 700 —Å–∏–º–≤–æ–ª–æ–≤`

---

## üîÑ –ü–æ–ª–Ω–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –∏–º–ø–æ—Ä—Ç–∞

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

```bash
npx tsx scripts/check-db-jokes.ts
```

–í—ã —É–≤–∏–¥–∏—Ç–µ:
- –°–∫–æ–ª—å–∫–æ —à—É—Ç–æ–∫ —É–∂–µ –≤ –ë–î –∏–∑ RicUIB
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º
- –°—Ç–∞—Ç—É—Å—ã —à—É—Ç–æ–∫

### –®–∞–≥ 2: –ò–º–ø–æ—Ä—Ç 500 —à—É—Ç–æ–∫

```bash
npx tsx scripts/import-ricuib-jokes.ts
```

–°–∫—Ä–∏–ø—Ç –≤—ã–≤–µ–¥–µ—Ç:
```
üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò–ú–ü–û–†–¢–ê:
   –í—Å–µ–≥–æ —à—É—Ç–æ–∫ –≤ —Ñ–∞–π–ª–µ: 7169
   –ü–æ–¥—Ö–æ–¥—è—â–∏—Ö –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞: 6827
   –í—ã–±—Ä–∞–Ω–æ —Å–ª—É—á–∞–π–Ω–æ: 500
   –£–∂–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–æ –≤ –ë–î: 0
   –î–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤—ã—Ö: 500
   –ü–æ–º–µ—á–µ–Ω–æ –∫–∞–∫ added=true: 500

   –ü–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º:
   - 1000 chistes: 188 —à—É—Ç–æ–∫
   - Pintamania: 312 —à—É—Ç–æ–∫

   –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏:
   - –í —Ñ–∞–π–ª–µ –ø–æ–º–µ—á–µ–Ω–æ added=true: 500
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: 500
   - –°—Ç–∞—Ç—É—Å: ‚úÖ OK
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞

```bash
npx tsx scripts/check-db-jokes.ts
```

---

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–∞ —Å –ë–î

–ï—Å–ª–∏ –≤—ã –≤—Ä—É—á–Ω—É—é —É–¥–∞–ª–∏–ª–∏ —à—É—Ç–∫–∏ –∏–∑ –ë–î –∏–ª–∏ –Ω—É–∂–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å:

```bash
npx tsx scripts/sync-ricuib-added-status.ts
```

### –°–±—Ä–æ—Å –≤—Å–µ—Ö —Ñ–ª–∞–≥–æ–≤ added

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –Ω–∞—á–∞—Ç—å —Å –Ω—É–ª—è (–≤–µ—Ä–Ω—É—Ç—å –≤—Å–µ `added: true` ‚Üí `added: false`):

```python
python3 << 'EOF'
import json

with open('chistes_ricuib.json', 'r', encoding='utf-8') as f:
    chistes = json.load(f)

for chiste in chistes:
    chiste['added'] = False

with open('chistes_ricuib.json', 'w', encoding='utf-8') as f:
    json.dump(chistes, f, ensure_ascii=False, indent=2)

print(f"‚úÖ –í—Å–µ {len(chistes)} —à—É—Ç–æ–∫ —Å–±—Ä–æ—à–µ–Ω—ã –≤ added=false")
EOF
```

### –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö RicUIB —à—É—Ç–æ–∫ –∏–∑ –ë–î

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å –ë–î –æ—Ç RicUIB —à—É—Ç–æ–∫:

```bash
npx tsx scripts/delete-old-ricuib-jokes.ts
```

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ**: –£–¥–∞–ª–∏—Ç –í–°–ï —à—É—Ç–∫–∏ —Å–æ —Å—Ç–∞—Ä—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º externalId!

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞

### –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
- **–í—Å–µ–≥–æ —à—É—Ç–æ–∫**: 7,169
- **–ò—Å—Ç–æ—á–Ω–∏–∫–∏**:
  - 1000 chistes: 2,422 —à—É—Ç–∫–∏ (33.8%)
  - Pintamania: 4,747 —à—É—Ç–æ–∫ (66.2%)

### –ü–æ–¥—Ö–æ–¥—è—â–∏–µ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞:
- **30-700 —Å–∏–º–≤–æ–ª–æ–≤**: ~6,827 —à—É—Ç–æ–∫ (95.2%)
- **–ö–∞—Ç–µ–≥–æ—Ä–∏—è "cortos"**: ~1,480 —à—É—Ç–æ–∫ (–∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è shorts)

### –ü—Ä–∏–º–µ—Ä—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–π:
- cortos (–∫–æ—Ä–æ—Ç–∫–∏–µ) - 1,482
- malos (–ø–ª–æ—Ö–∏–µ/–≥–ª—É–ø—ã–µ) - 896
- Jaimito (–ø—Ä–æ Jaimito) - 635
- animales (–ø—Ä–æ –∂–∏–≤–æ—Ç–Ω—ã—Ö) - 868
- buenos (—Ö–æ—Ä–æ—à–∏–µ) - 527

---

## üóÑÔ∏è –§–æ—Ä–º–∞—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

–®—É—Ç–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é `joke_candidates` —Å —Ç–∞–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:

```typescript
{
  source: "ricuib-1000chistes" | "ricuib-pintamania",
  title: "–ó–∞–≥–æ–ª–æ–≤–æ–∫",
  text: "–¢–µ–∫—Å—Ç —à—É—Ç–∫–∏",
  externalId: "ricuib:1000 chistes:123",  // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —Å –∏–Ω–¥–µ–∫—Å–æ–º
  language: "es",
  votesTotal: 25,
  meta: {
    categorias: ["cortos", "malos"],
    palabras_clave: ["—Å–ª–æ–≤–∞"],
    origen: "1000 chistes",
    dataset: "RicUIB/Mineria-texto-chistes",
    ricuibIndex: 123  // –ò–Ω–¥–µ–∫—Å –∏–∑ JSON —Ñ–∞–π–ª–∞
  },
  status: "pending",
  createdAt: Date
}
```

### –í–∞–∂–Ω–æ: —Ñ–æ—Ä–º–∞—Ç externalId

‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç** (–Ω–æ–≤—ã–π):
```
"ricuib:1000 chistes:123"
"ricuib:Pintamania:456"
```

‚ùå **–°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç** (–Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å):
```
"1000_chistes:Titulo_con_espacios"
```

–ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–∏–Ω–¥–µ–∫—Å –∏–∑ JSON —Ñ–∞–π–ª–∞** –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

---

## üö® –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "–î–æ–±–∞–≤–ª–µ–Ω–æ 500, –Ω–æ –≤ —Ñ–∞–π–ª–µ 1035 —Å added=true"

**–ü—Ä–∏—á–∏–Ω–∞**: –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç externalId (–±–µ–∑ –∏–Ω–¥–µ–∫—Å–∞) –∏–ª–∏ –¥—É–±–ª–∏–∫–∞—Ç—ã –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤.

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# 1. –°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ added –≤ false
python3 scripts/reset_added_flags.py

# 2. –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —à—É—Ç–∫–∏ –∏–∑ –ë–î
npx tsx scripts/delete-old-ricuib-jokes.ts

# 3. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–Ω–æ–≤–æ
npx tsx scripts/import-ricuib-jokes.ts
```

### –ü—Ä–æ–±–ª–µ–º–∞: "–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤ –ë–î –∏ —Ñ–∞–π–ª–µ"

**–†–µ—à–µ–Ω–∏–µ**:
```bash
npx tsx scripts/sync-ricuib-added-status.ts
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Duplicate key error" –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ

**–ü—Ä–∏—á–∏–Ω–∞**: –®—É—Ç–∫–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î.

**–†–µ—à–µ–Ω–∏–µ**: –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã, –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–æ–≤–∞.

---

## üìù –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π: –î–æ–±–∞–≤–∏—Ç—å –µ—â–µ 500 —à—É—Ç–æ–∫

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
npx tsx scripts/check-db-jokes.ts

# 2. –í–∏–¥–∏–º —á—Ç–æ –≤ –ë–î —É–∂–µ –µ—Å—Ç—å 500 —à—É—Ç–æ–∫
# –î–æ–±–∞–≤–ª—è–µ–º –µ—â–µ 500

npx tsx scripts/import-ricuib-jokes.ts

# 3. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
npx tsx scripts/check-db-jokes.ts

# –¢–µ–ø–µ—Ä—å –≤ –ë–î 1000 —à—É—Ç–æ–∫ –∏–∑ RicUIB!
```

### –°—Ü–µ–Ω–∞—Ä–∏–π: –ù–∞—á–∞—Ç—å —Å –Ω—É–ª—è

```bash
# 1. –£–¥–∞–ª—è–µ–º –≤—Å–µ RicUIB —à—É—Ç–∫–∏ –∏–∑ –ë–î
npx tsx scripts/delete-old-ricuib-jokes.ts

# 2. –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–∞–π–ª
python3 << 'EOF'
import json
with open('chistes_ricuib.json', 'r', encoding='utf-8') as f:
    chistes = json.load(f)
for c in chistes:
    c['added'] = False
with open('chistes_ricuib.json', 'w', encoding='utf-8') as f:
    json.dump(chistes, f, ensure_ascii=False, indent=2)
EOF

# 3. –î–æ–±–∞–≤–ª—è–µ–º 500 —à—É—Ç–æ–∫
npx tsx scripts/import-ricuib-jokes.ts
```

---

## üéì –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è

–°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `externalId` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤:

```typescript
const externalId = `ricuib:${joke.origen}:${joke.index}`;
```

–ì–¥–µ `index` - —ç—Ç–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä (0-7168) –∏–∑ JSON —Ñ–∞–π–ª–∞.

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–∞–ø–ø–∏–Ω–≥ added=true

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –ë–î:

```typescript
// –°–æ–∑–¥–∞–µ–º Set –∏–∑ –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —à—É—Ç–æ–∫
const addedIndices = new Set(newJokes.map(j => j.ricuibIndex));

// –ü–æ–º–µ—á–∞–µ–º –¢–û–õ–¨–ö–û —ç—Ç–∏ —à—É—Ç–∫–∏ –≤ JSON
for (const joke of allJokes) {
  if (addedIndices.has(joke.index)) {
    joke.added = true;
  }
}
```

–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –±—É–¥–µ—Ç –ø–æ–º–µ—á–µ–Ω–æ **—Ä–æ–≤–Ω–æ —Å—Ç–æ–ª—å–∫–æ —à—É—Ç–æ–∫**, —Å–∫–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –ë–î.

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã:

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `npx tsx scripts/check-db-jokes.ts` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç externalId —á–µ—Ä–µ–∑ `npx tsx scripts/verify-new-format.ts`
3. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ: `npx tsx scripts/sync-ricuib-added-status.ts`

---

## üéØ –ë—ã—Å—Ç—Ä–∞—è —Å–ø—Ä–∞–≤–∫–∞

| –î–µ–π—Å—Ç–≤–∏–µ | –ö–æ–º–∞–Ω–¥–∞ |
|----------|---------|
| –î–æ–±–∞–≤–∏—Ç—å 500 —à—É—Ç–æ–∫ | `npx tsx scripts/import-ricuib-jokes.ts` |
| –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ë–î | `npx tsx scripts/check-db-jokes.ts` |
| –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å | `npx tsx scripts/sync-ricuib-added-status.ts` |
| –£–¥–∞–ª–∏—Ç—å RicUIB —à—É—Ç–∫–∏ | `npx tsx scripts/delete-old-ricuib-jokes.ts` |
| –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç | `npx tsx scripts/verify-new-format.ts` |

---

**–í–µ—Ä—Å–∏—è**: 1.0
**–î–∞—Ç–∞**: 2026-01-11
**–î–∞—Ç–∞—Å–µ—Ç**: RicUIB/Mineria-texto-chistes (7,169 –∏—Å–ø–∞–Ω—Å–∫–∏—Ö —à—É—Ç–æ–∫)
